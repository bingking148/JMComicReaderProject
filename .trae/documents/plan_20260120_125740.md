# 修复JM漫画阅读器三个关键问题

## 问题分析

### 1. 阅读器加载失败
- **原因**：API请求URL格式错误，`API_BASE_URL`已经包含`/api`前缀，导致请求URL重复
- **位置**：`reader.html`的`initReader`函数

### 2. 已下载漫画不显示
- **原因**：下载完成后未正确刷新列表，或API返回格式不匹配
- **位置**：`downloaded.html`的加载逻辑

### 3. 缓存状态报错
- **原因**：错误访问`result.data.cache_size_mb`，但`apiRequest`函数已经直接返回`data.data`
- **位置**：`index.html`的`showCacheStatus`函数

## 修复方案

### 修复1：阅读器加载失败
1. 修改`reader.html`中API请求URL格式
2. 移除`API_BASE_URL`前缀，使用相对路径
3. 确保API请求正确返回漫画数据

### 修复2：已下载漫画不显示
1. 检查`downloaded.html`中的API请求
2. 确保下载完成后正确更新列表
3. 验证API返回数据格式

### 修复3：缓存状态报错
1. 修改`index.html`中`showCacheStatus`函数
2. 直接访问`status.cache_size_mb`，移除多余的`.data`
3. 添加错误处理，防止undefined访问

## 实施步骤

1. 修复`index.html`中的缓存状态函数
2. 修复`reader.html`中的API请求URL
3. 修复`downloaded.html`中的列表刷新逻辑
4. 添加适当的错误处理和日志
5. 测试所有功能确保正常工作

## 技术细节

- 使用正确的API请求格式
- 添加防御性编程，防止undefined访问
- 确保数据格式一致性
- 添加适当的错误反馈